<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Feedback Badge Demo</title>

  <!-- Component CSS -->
  <link rel="stylesheet" href="/components/feedback-badge/feedback-badge.css" />
</head>
<body>

  <h1>Feedback Badge – Test</h1>

  <div style="display:flex; gap:0.5rem; margin: 0 0 0.75rem 0;">
    <button id="btnCorrect" type="button">Show correct</button>
    <button id="btnWrong" type="button">Show wrong</button>
    <button id="btnHide" type="button">Hide</button>
  </div>

  <!-- Visible diagnostics -->
  <pre id="diag" style="padding:0.75rem; border:1px solid #ccc; border-radius:8px; white-space:pre-wrap;">
Diagnostics: (waiting)
  </pre>

  <!-- Feedback badge -->
  <div class="feedback-badge feedback-badge--hidden" role="status" aria-live="polite">
    <span class="feedback-badge__icon" aria-hidden="true">✔</span>
    <span class="feedback-badge__text">Feedback</span>
  </div>

  <!-- Component JS (must load before we instantiate) -->
  <script src="/components/feedback-badge/feedback-badge.js"></script>

  <!-- Page glue code -->
  <script>
    const diag = (msg) => {
      const el = document.getElementById("diag");
      el.textContent = (el.textContent || "") + "\n" + msg;
      console.log("[FeedbackBadge Demo]", msg);
    };

    window.addEventListener("DOMContentLoaded", () => {
      diag("DOM loaded.");

      // 1) Verify JS loaded
      diag("window.FeedbackBadge typeof = " + (typeof window.FeedbackBadge));

      // 2) Verify badge exists
      const badgeEl = document.querySelector(".feedback-badge");
      diag("badge element found = " + (!!badgeEl));

      if (!window.FeedbackBadge) {
        diag("ERROR: feedback-badge.js not loaded OR path is wrong.");
        return;
      }
      if (!badgeEl) {
        diag("ERROR: .feedback-badge element not found in the HTML.");
        return;
      }

      const badge = new window.FeedbackBadge(badgeEl);
      diag("Badge instance created OK.");

      // Wire buttons
      document.getElementById("btnCorrect").addEventListener("click", () => {
        diag("Clicked: Show correct");
        badge.showCorrect("Goed gedaan");
      });

      document.getElementById("btnWrong").addEventListener("click", () => {
        diag("Clicked: Show wrong");
        badge.showWrong("Probeer opnieuw");
      });

      document.getElementById("btnHide").addEventListener("click", () => {
        diag("Clicked: Hide");
        badge.hide();
      });

      diag("Ready. Click buttons.");
    });
  </script>

</body>
</html>