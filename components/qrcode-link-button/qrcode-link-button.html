<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>QR Code Link Button Demo</title>

  <link rel="stylesheet" href="./qrcode-link-button.css" />
</head>
<body>

  <h1>QR Code Link Button</h1>

  <!-- BUTTON: class MUST match JS -->
  <button
    class="qrcode-link-button"
    data-url="https://www.example.com"
    type="button"
  >
    <span class="qrcode-link-button__icon" aria-hidden="true">ðŸ”—</span>
    <span class="qrcode-link-button__text">Show QR code</span>
  </button>

  <!-- QR MODAL -->
  <div
    class="qrcode-modal qrcode-modal--hidden"
    role="dialog"
    aria-modal="true"
    aria-labelledby="qrcode-title"
  >
    <div class="qrcode-modal__panel">
      <h2 id="qrcode-title">Scan QR code</h2>

      <!-- JS injects <img> here -->
      <div id="qrcode"></div>

      <button id="qrcodeClose" type="button">Close</button>
    </div>
  </div>

  <script src="./qrcode-link-button.js"></script>
  <script>
    (function () {
      const THEME_KEY = "bs_theme";
      const saved = localStorage.getItem(THEME_KEY);
      const theme = (saved === "light" || saved === "dark")
        ? saved
        : ((window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches) ? "dark" : "light");
      document.documentElement.setAttribute("data-theme", theme);
      window.addEventListener("storage", (ev) => {
        if (ev.key !== THEME_KEY) return;
        if (ev.newValue === "light" || ev.newValue === "dark") {
          document.documentElement.setAttribute("data-theme", ev.newValue);
        }
      });
    })();
  </script>

</body>
</html>
