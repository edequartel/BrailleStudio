<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <title>QR Link Button Demo</title>

  <!-- CSS -->
  <link rel="stylesheet" href="qr-link-button.css" />

  <!-- CSS load diagnostic -->
  <style>
    /* If this turns green, CSS loaded correctly */
    body::before {
      content: "CSS NOT LOADED";
      display: block;
      padding: 0.5rem;
      margin-bottom: 0.75rem;
      border-radius: 6px;
      background: #ffecec;
      color: #7a1414;
      font-weight: 700;
    }

    /* This selector only exists if qr-link-button.css is loaded */
    .qr-link-button {
      outline: 3px dashed limegreen;
    }

    .qr-link-button:not(:defined) ~ body::before {}
  </style>
</head>
<body>

  <h1>QR Link Button â€“ Diagnostics</h1>

  <!-- JS diagnostics -->
  <pre id="diag"
       style="padding:0.75rem;
              border:1px solid #ccc;
              border-radius:8px;
              margin-bottom:1rem;
              white-space:pre-wrap;">
Diagnostics:
  </pre>

  <button
    class="qr-link-button"
    data-url="https://www.example.com"
  >
    <span class="qr-link-button__icon" aria-hidden="true">ðŸ”—</span>
    <span class="qr-link-button__text">Open example.com</span>
  </button>

  <!-- JS -->
  <script src="qr-link-button.js"></script>

  <!-- Diagnostic logic -->
  <script>
    const diag = (msg) => {
      const el = document.getElementById("diag");
      el.textContent += msg + "\n";
      console.log("[QRLinkButton]", msg);
    };

    window.addEventListener("DOMContentLoaded", () => {
      diag("DOM loaded");

      /* 1. Check CSS */
      const btn = document.querySelector(".qr-link-button");
      const styles = window.getComputedStyle(btn);

      if (styles.borderRadius !== "0px") {
        diag("CSS: loaded (border-radius detected)");
      } else {
        diag("CSS: NOT loaded (border-radius missing)");
      }

      /* 2. Check JS */
      diag("typeof QRLinkButton = " + typeof window.QRLinkButton);

      if (typeof window.QRLinkButton === "function") {
        diag("JS: loaded successfully");
      } else {
        diag("JS: NOT loaded");
      }

      /* 3. Network hint */
      diag("If CSS/JS are missing:");
      diag("- Check file location");
      diag("- Check filename case (macOS/Linux!)");
      diag("- Check relative path from this HTML file");
    });
  </script>

</body>
</html>