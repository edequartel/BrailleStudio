<!doctype html>
<!--
  BrailleMonitor component – example.html (UNICODE DEMO)
  -----------------------------------------------------
  Demonstrates Unicode braille patterns (U+2800…U+28FF) rendering.

  REQUIRED FILES (same folder)
    braillemonitor.js   (unicode version with setCells)
    braillemonitor.css  (unicode font stack for .monitor-cell__braille)
-->
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BrailleMonitor component – example (Unicode)</title>

  <meta name="color-scheme" content="light dark" />

  <!-- Component CSS (same folder) -->
  <link rel="stylesheet" href="braillemonitor.css" />
</head>
<body>

  <h1>BrailleMonitor – component example (Unicode)</h1>
  <p class="note">Top line shows Unicode braille patterns. Bottom line shows the original text.</p>

  <!-- Host container (component injects markup here) -->
  <div id="brailleMonitorComponent"></div>

  <!-- Component JS (same folder) -->
  <script src="braillemonitor.js"></script>

  <script>
    // Minimal demo mapping (NOT a full translator).
    // For real Dutch braille rules use liblouis later.
    const BRAILLE_CAPITAL = "⠠";
    const BRAILLE_NUMBER  = "⠼";
    const BRAILLE_LETTER = {
      a:"⠁",b:"⠃",c:"⠉",d:"⠙",e:"⠑",f:"⠋",g:"⠛",h:"⠓",i:"⠊",j:"⠚",
      k:"⠅",l:"⠇",m:"⠍",n:"⠝",o:"⠕",p:"⠏",q:"⠟",r:"⠗",s:"⠎",t:"⠞",
      u:"⠥",v:"⠧",w:"⠺",x:"⠭",y:"⠽",z:"⠵"
    };
    const BRAILLE_DIGIT = {"1":"⠁","2":"⠃","3":"⠉","4":"⠙","5":"⠑","6":"⠋","7":"⠛","8":"⠓","9":"⠊","0":"⠚"};
    const BRAILLE_PUNCT = {" ":"⠀",".":"⠲",",":"⠂",";":"⠆",":":"⠒","?":"⠦","!":"⠖","-":"⠤","'":"⠄","\"":"⠶","/":"⠌"};
    const UNKNOWN = "⣿";

    function toBrailleCellsUnicode(text){
      const raw = String(text ?? "");
      let out = "";
      let numberMode = false;

      for (let i=0;i<raw.length;i++){
        const ch = raw[i];

        if (ch >= "0" && ch <= "9") {
          if (!numberMode) { out += BRAILLE_NUMBER; numberMode = true; }
          out += (BRAILLE_DIGIT[ch] || UNKNOWN);
          continue;
        }

        numberMode = false;

        if (BRAILLE_PUNCT[ch]) { out += BRAILLE_PUNCT[ch]; continue; }

        const lower = ch.toLowerCase();
        if (BRAILLE_LETTER[lower]) {
          if (ch !== lower) out += BRAILLE_CAPITAL;
          out += BRAILLE_LETTER[lower];
          continue;
        }

        out += UNKNOWN;
      }
      return out;
    }

    const monitor = BrailleMonitor.init({
      containerId: "brailleMonitorComponent",
      onCursorClick(info) {
        // info = { index, letter, word }
        console.log("Cursor click:", info);
      },
      showInfo: true,

      // Optional display prefs for the new unicode monitor:
      showPrintLine: true,
      showVisiblePrintSpaces: true,
      showVisibleBrailleSpaces: false
    });

    const text = "Dit is een voorbeeldzin voor de braillemonitor.";
    const cells = toBrailleCellsUnicode(text);

    // NEW: setCells(cellsUnicode, { text })
    monitor.setCells(cells, { text });
  </script>

</body>
</html>
